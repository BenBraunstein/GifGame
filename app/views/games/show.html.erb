<h1><%= info(@game.game_form.style)[:name] %></h1>

[only accessible to player]


<% if @game.complete? %>


    <h4><%="(played on #{@game.updated_at.to_date})"%></h4>

    <h2>Results</h2>
    
    <h4><%= "You got #{@game.game_answers.select{|answer| answer.correct?}.length} out of #{@game.game_answers.length}!"%></h4>

    <% @game.game_answers.each_with_index do |answer, index| %>

        <h3>Question <%= index + 1%></h3>

        <% if answer.correct? %>
            <h4>Correct!</h4>
        <% else%>
            <h4>Wrong!</h4>
        <% end %>

        <%= display_prompt(@game.game_form.style, answer.question).html_safe %>

        <% randomize_choices(@game.game_form.style, answer.question).each do |choice|%>

            <li><%= display_choice(@game.game_form.style, choice)%>
            
                <%="(Your Answer)" if choice == answer.choice%>
                <%="(The Correct Answer)" if choice == answer.question.a%>
            
            </li>

        <% end %>

        

    <% end %>


<% else %>

    <h2>Instructions</h2>

    <%= info(@game.game_form.style)[:instructions] %>

    <h2>Questions</h2>


    <%= form_tag "/users/#{@game.user.id}/games/#{@game.id}" do %>

    <% @game.game_form.questions.each_with_index do |question, index|%>

    <h4>Question <%= index + 1 %></h4>

    <%= display_prompt(@game.game_form.style, question).html_safe %>

    <br />

    <% randomize_choices(@game.game_form.style, question).each do |choice|%>

    <%= radio_button_tag "#{index + 1}", choice %>
    <%= label_tag display_choice(@game.game_form.style, choice) %>

    <% end %>

    <% end %>

    <br />

    <%= submit_tag "Submit Answers!" %>

    <% end %>

<% end %>